<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ meta_title }}</title>
    <meta name="description" content="{{ meta_desc }}">
    <link rel="canonical" href="{{ canonical }}">
    {% for link in hreflangs %}
    <link rel="alternate" hreflang="{{ link.hreflang }}" href="{{ link.href }}">
    {% endfor %}
    <meta property="og:title" content="{{ meta_title }}">
    <meta property="og:description" content="{{ meta_desc }}">
    <meta property="og:url" content="{{ og_url }}">
    <meta property="og:type" content="article">
    <meta property="og:image" content="{{ og_image }}">
    <meta property="og:image:alt" content="{{ meta_title }}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/company.css">
    <link rel="stylesheet" href="/static/css/searchbar.css">
</head>
<body>
    <div class="company-page">
        <div class="hero">
            <h1 class="hero-title">{{ t.list_title }}</h1>
            <p class="hero-subtitle">{{ t.list_subtitle }}</p>
        </div>

        {% set placeholder = t.search_placeholder %}
        {% set button_text = t.search_button %}
        {% set input_id = "searchInputCompany" %}
        {% set button_id = "searchButtonCompany" %}
        {% set button_onclick = "window.location.href='/" ~ (lang if lang else 'ru') ~ "/reviews'" %}
        {% include "partials/search_bar.html" with context %}

        <div class="actions">
            <a class="btn back-btn" href="/{{ lang }}/reviews">
                <span class="icon">
                    <svg width="15" height="12" viewBox="0 0 15 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.243989 6.14691C0.0877627 5.99063 0 5.77871 0 5.55774C0 5.33677 0.0877627 5.12485 0.243989 4.96857L4.95816 0.254407C5.03503 0.174815 5.12698 0.11133 5.22865 0.0676557C5.33032 0.0239816 5.43967 0.000992977 5.55032 3.14637e-05C5.66097 -0.00093005 5.7707 0.0201549 5.87312 0.0620557C5.97553 0.103956 6.06857 0.165834 6.14682 0.244078C6.22506 0.322322 6.28694 0.415365 6.32884 0.517778C6.37074 0.620192 6.39183 0.729925 6.39086 0.840575C6.3899 0.951224 6.36691 1.06057 6.32324 1.16224C6.27957 1.26391 6.21608 1.35587 6.13649 1.43274L2.84482 4.72441H13.8807C14.1017 4.72441 14.3136 4.8122 14.4699 4.96848C14.6262 5.12477 14.714 5.33673 14.714 5.55774C14.714 5.77875 14.6262 5.99072 14.4699 6.147C14.3136 6.30328 14.1017 6.39107 13.8807 6.39107H2.84482L6.13649 9.68274C6.28829 9.83991 6.37228 10.0504 6.37038 10.2689C6.36848 10.4874 6.28084 10.6964 6.12634 10.8509C5.97183 11.0054 5.76282 11.0931 5.54432 11.095C5.32583 11.0969 5.11532 11.0129 4.95816 10.8611L0.243989 6.14691Z" fill="#012AF9"/>
                    </svg>
                </span>
                –ù–∞–∑–∞–¥
            </a>
        </div>

        <div class="company-card">
            <div class="company-avatar">üè¢</div>
            <div class="company-info">
                <div class="company-name">{{ display_name }}</div>
                <div class="company-meta">{{ t.total_reviews }}: {{ total_reviews }}</div>
            </div>
        </div>

        <div class="actions dual">
            <a class="btn ghost" href="#">
                –≠—Ç–æ –º–æ—è –∫–æ–º–ø–∞–Ω–∏—è
            </a>
            <a class="btn solid" href="/{{ lang }}/reviews/{{ display_name | urlencode }}?page=1#add-review">
                –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
            </a>
        </div>

        {% if company_meta %}
        <div class="company-meta-card">
            {% for item in company_meta %}
            <div class="meta-row">
                <div class="meta-label">{{ item.label }}</div>
                <div class="meta-value">{{ item.value }}</div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="reviews">
            {% for review in reviews %}
            <div class="review-card">
                <div class="review-top">
                    <div class="review-source">{{ review.source }}</div>
                    <div class="review-stars-row">
                        <div class="review-stars">
                            {% for i in range(1,6) %}
                                {% if review.rating >= i %}
                                <span class="star filled">‚òÖ</span>
                                {% else %}
                                <span class="star">‚òÜ</span>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <div class="review-rating-number">{{ "%.1f"|format(review.rating) }}</div>
                    </div>
                </div>

                <div class="review-title-date">
                    <div class="review-title">{{ review.subject or display_name }}</div>
                    <div class="review-date">{{ review.date }}</div>
                </div>

                <div class="review-from-row">
                    <div class="review-from-label">–û—Ç:</div>
                    <div class="review-author">{{ review.reviewer }}</div>
                </div>

                <div class="review-bubble">{{ review.comment }}</div>
            </div>
            {% endfor %}
        </div>

        <div class="pagination">
            {% if page > 1 %}
            <a class="page-btn" href="?page={{ page - 1 }}">‚Üê</a>
            {% else %}
            <span class="page-btn disabled">‚Üê</span>
            {% endif %}
            <span class="page-info">{{ t.page_label }} {{ page }} / {{ total_pages }}</span>
            {% if page < total_pages %}
            <a class="page-btn" href="?page={{ page + 1 }}">‚Üí</a>
            {% else %}
            <span class="page-btn disabled">‚Üí</span>
            {% endif %}
        </div>
    </div>
</body>
<script src="/static/js/search_bar.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        window.initSearchBar({
            inputId: 'searchInputCompany',
            buttonId: 'searchButtonCompany',
            basePath: '/{{ lang }}/reviews',
            emptyText: '{{ t.empty_results }}'
        });
    });
</script>
</html>

